{"version":3,"sources":["../../js/app.js"],"names":["createCodeElement","gist","solutionsElement","document","getElementById","newElement","appendChild","createElement","setAttribute","id","toggleMenu","getElementsByTagName","classList","toggle","_callee","url","regeneratorRuntime","wrap","_callee$","_context","prev","next","fetch","sent","json","abrupt","stop","this","apiGetJson","_callee2","_callee2$","_context2","text","apiGetText","_callee3","code","element","h2","_callee3$","_context3","innerHTML","marked","hljs","highlightBlock","firstChild","prepend","renderCode","_callee4","comments","first","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_iterator","_step","comment","commentElement","gistElement","_callee4$","_context4","undefined","Symbol","iterator","done","value","body","t0","return","finish","renderComments","_callee5","chapter","menuToggle","arguments","length","chapterGists","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_iterator2","_step2","e","codeURL","_callee5$","_context5","gists","filter","a","description","substring","indexOf","files","Object","keys","raw_url","comments_url","currentChapter","remove","add","renderChapter","_callee6","chapterRef","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_loop","_iterator3","_step3","_callee6$","_context6","menuElement","onclick","enableChaptersMenu","_callee7","_callee7$","_context7","gistsURL","includes","sort","b","console","log","message","render","_asyncToGenerator","mark","_callee8","_callee8$","_context8"],"mappings":"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","file":"app.js","sourcesContent":["const gistsURL = 'https://api.github.com/users/jonurry/gists';\nlet gists = {};\nlet currentChapter = 2;\n\nfunction createCodeElement(gist) {\n  let solutionsElement = document.getElementById('solutions');\n  let newElement = solutionsElement.appendChild(document.createElement('div'));\n  newElement.setAttribute('id', gist.id);\n  return newElement;\n}\n\nasync function apiGetJson(url) {\n  return await (await fetch(url)).json();\n}\n\nasync function apiGetText(url) {\n  return await (await fetch(url)).text();\n}\n\nasync function renderCode(code, element) {\n  element.innerHTML = marked('```js\\n' + code + '\\n```');\n  hljs.highlightBlock(element.firstChild.firstChild);\n  let h2 = document.createElement('h3');\n  h2.innerHTML = 'Solution';\n  element.prepend(h2);\n}\n\nasync function renderComments(comments, id) {\n  let first = true;\n  for (let comment of comments) {\n    let commentElement;\n    let gistElement = document.getElementById(id);\n    if (first) {\n      gistElement.prepend(document.createElement('div'));\n      commentElement = gistElement.firstChild;\n      first = false;\n    } else {\n      commentElement = gistElement.appendChild(document.createElement('div'));\n    }\n    commentElement.setAttribute('id', comment.id);\n    commentElement.innerHTML = marked(comment.body);\n  }\n}\n\nasync function renderChapter(chapter, menuToggle = true) {\n  document.getElementById('solutions').innerHTML = '';\n  let chapterGists = gists.filter(a => \n    a.description.substring(0, a.description.indexOf('.')) == chapter\n  );\n  for (let gist of chapterGists) {\n    let e = createCodeElement(gist);\n    let codeURL = gist.files[Object.keys(gist.files)[0]].raw_url;\n    let code = await apiGetText(codeURL);\n    await renderCode(code, e);\n    if (gist.comments > 0) {\n      let comments = await apiGetJson(gist.comments_url);\n      await renderComments(comments, gist.id);\n    }\n  }\n  if (currentChapter !== chapter) {\n    document.getElementById('nav-chapter-' + currentChapter).classList.remove('active');\n    document.getElementById('nav-chapter-' + chapter).classList.add('active');\n    currentChapter = chapter;\n  }\n  if (menuToggle) {\n    toggleMenu();\n  };\n}\n\nasync function enableChaptersMenu() {\n  let chapterRef = 0;\n  for (let gist of gists) {\n    let chapter = gist.description.substring(0, gist.description.indexOf('.'));\n    if (chapter != chapterRef) {\n      let menuElement = document.getElementById('nav-chapter-' + chapter);\n      menuElement.classList.remove('inactive');\n      menuElement.onclick = function() {renderChapter(chapter);};\n      chapterRef = chapter;\n    }\n  }\n}\n\nasync function render() {\n  try {\n    // get all of my code gists from github\n    gists = await apiGetJson(gistsURL);\n    // only keep gists relating to (Eloquent JavaScript Solutions)\n    gists = gists.filter(a =>\n      a.description.includes('(Eloquent JavaScript Solutions)')\n    );\n    // sort the remaining gists by exercise number\n    gists.sort((a, b) => {\n      if (a.description < b.description) return -1;\n      if (a.description > b.description) return 1;\n      return 0;\n    });\n    enableChaptersMenu();\n    renderChapter(currentChapter, false);\n  } catch (error) {\n    console.log(error.message);\n  }\n}\n\n(async () => {\n  await render();\n})();\n\nfunction toggleMenu() {\n  document.getElementsByTagName('nav')[0].classList.toggle('collapsed');\n}"]}