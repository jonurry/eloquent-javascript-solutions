"use strict";function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(a,i){try{var s=t[a](i),c=s.value}catch(e){return void r(e)}if(!s.done)return Promise.resolve(c).then(function(e){n("next",e)},function(e){n("throw",e)});e(c)}return n("next")})}}function createCodeElement(e){var t=document.getElementById("solutions"),r=t.appendChild(document.createElement("div"));return r.setAttribute("id",e.id),r}function toggleMenu(){document.getElementsByTagName("nav")[0].classList.toggle("collapsed")}var apiGetJson=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function e(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,fetch(t);case 2:return r.next=4,r.sent.json();case 4:return r.abrupt("return",r.sent);case 5:case"end":return r.stop()}},e,this)}));return function t(r){return e.apply(this,arguments)}}(),apiGetText=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function e(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,fetch(t);case 2:return r.next=4,r.sent.text();case 4:return r.abrupt("return",r.sent);case 5:case"end":return r.stop()}},e,this)}));return function t(r){return e.apply(this,arguments)}}(),renderCode=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t,r){var n;return regeneratorRuntime.wrap(function e(a){for(;;)switch(a.prev=a.next){case 0:r.innerHTML=marked("```js\n"+t+"\n```"),hljs.highlightBlock(r.firstChild.firstChild),n=document.createElement("h3"),n.innerHTML="Solution",r.prepend(n);case 5:case"end":return a.stop()}},e,this)}));return function t(r,n){return e.apply(this,arguments)}}(),renderComments=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t,r){var n,a,i,s,c,o,u,p,d;return regeneratorRuntime.wrap(function e(f){for(;;)switch(f.prev=f.next){case 0:for(n=!0,a=!0,i=!1,s=void 0,f.prev=4,c=t[Symbol.iterator]();!(a=(o=c.next()).done);a=!0)u=o.value,p=void 0,d=document.getElementById(r),n?(d.prepend(document.createElement("div")),p=d.firstChild,n=!1):p=d.appendChild(document.createElement("div")),p.setAttribute("id",u.id),p.innerHTML=marked(u.body);f.next=12;break;case 8:f.prev=8,f.t0=f.catch(4),i=!0,s=f.t0;case 12:f.prev=12,f.prev=13,!a&&c.return&&c.return();case 15:if(f.prev=15,!i){f.next=18;break}throw s;case 18:return f.finish(15);case 19:return f.finish(12);case 20:case"end":return f.stop()}},e,this,[[4,8,12,20],[13,,15,19]])}));return function t(r,n){return e.apply(this,arguments)}}(),renderChapter=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n,a,i,s,c,o,u,p,d,f,m;return regeneratorRuntime.wrap(function e(h){for(;;)switch(h.prev=h.next){case 0:document.getElementById("solutions").innerHTML="",n=gists.filter(function(e){return e.description.substring(0,e.description.indexOf("."))==t}),a=!0,i=!1,s=void 0,h.prev=5,c=n[Symbol.iterator]();case 7:if(a=(o=c.next()).done){h.next=25;break}return u=o.value,p=createCodeElement(u),d=u.files[Object.keys(u.files)[0]].raw_url,h.next=13,apiGetText(d);case 13:return f=h.sent,h.next=16,renderCode(f,p);case 16:if(!(u.comments>0)){h.next=22;break}return h.next=19,apiGetJson(u.comments_url);case 19:return m=h.sent,h.next=22,renderComments(m,u.id);case 22:a=!0,h.next=7;break;case 25:h.next=31;break;case 27:h.prev=27,h.t0=h.catch(5),i=!0,s=h.t0;case 31:h.prev=31,h.prev=32,!a&&c.return&&c.return();case 34:if(h.prev=34,!i){h.next=37;break}throw s;case 37:return h.finish(34);case 38:return h.finish(31);case 39:currentChapter!==t&&(document.getElementById("nav-chapter-"+currentChapter).classList.remove("active"),document.getElementById("nav-chapter-"+t).classList.add("active"),currentChapter=t),r&&toggleMenu();case 42:case"end":return h.stop()}},e,this,[[5,27,31,39],[32,,34,38]])}));return function t(r){return e.apply(this,arguments)}}(),enableChaptersMenu=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,r,n,a,i,s,c;return regeneratorRuntime.wrap(function e(o){for(;;)switch(o.prev=o.next){case 0:for(t=0,r=!0,n=!1,a=void 0,o.prev=4,i=function e(){var r=c.value,n=r.description.substring(0,r.description.indexOf("."));if(n!=t){var a=document.getElementById("nav-chapter-"+n);a.classList.remove("inactive"),a.onclick=function(){renderChapter(n)},t=n}},s=gists[Symbol.iterator]();!(r=(c=s.next()).done);r=!0)i();o.next=13;break;case 9:o.prev=9,o.t0=o.catch(4),n=!0,a=o.t0;case 13:o.prev=13,o.prev=14,!r&&s.return&&s.return();case 16:if(o.prev=16,!n){o.next=19;break}throw a;case 19:return o.finish(16);case 20:return o.finish(13);case 21:case"end":return o.stop()}},e,this,[[4,9,13,21],[14,,16,20]])}));return function t(){return e.apply(this,arguments)}}(),render=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function e(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,apiGetJson(gistsURL);case 3:gists=t.sent,gists=gists.filter(function(e){return e.description.includes("(Eloquent JavaScript Solutions)")}),gists.sort(function(e,t){return e.description<t.description?-1:e.description>t.description?1:0}),enableChaptersMenu(),renderChapter(currentChapter,!1),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0.message);case 13:case"end":return t.stop()}},e,this,[[0,10]])}));return function t(){return e.apply(this,arguments)}}(),gistsURL="https://api.github.com/users/jonurry/gists",gists={},currentChapter=2;_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function e(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,render();case 2:case"end":return t.stop()}},e,void 0)}))();
//# sourceMappingURL=./app.js.map